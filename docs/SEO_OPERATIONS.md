# SEO Operations Playbook

This site leans heavily on client-side React, so a consistent SEO process keeps crawlers happy and prevents the “loading screen” footprint from leaking into search results. Use this reference whenever you touch canonical tags, sitemaps, or route-level Suspense.

## Canonical URL Policy

- All canonical URLs are generated by `getCanonicalUrl` (`src/utils/schemaValidation.ts`). The helper trims trailing slashes for every path except the root (`https://exquisitedentistryla.com`).  
- Never hand-build canonical strings. When you need a canonical inside a component or structured-data block, import `getCanonicalUrl` and pass the route path (e.g., `getCanonicalUrl('/zoom-whitening')`).  
- `PageSEO` already uses this helper, so `<link rel="canonical">`, Open Graph tags, JSON-LD, and the sitemap all stay in sync. If you introduce a new way to emit meta tags, wire it up to the helper immediately.

## Sitemap Workflow

1. Run `npm run build` (or `npm run build:prod`) after content changes. The script performs a Vite build, prerenders key routes via `react-snap`, and writes `public/sitemap.xml`.  
2. Inspect `dist/sitemap.xml` before committing: confirm that every `<loc>` omits the trailing slash and new routes/blog posts are represented.  
3. Adding new high-value pages? Update the static section in `src/utils/sitemapGenerator.ts` so the sitemap captures the page with the right priority and change frequency.  
4. When routes become obsolete, remove them from both the sitemap generator and `reactSnap.include` in `package.json` so we don’t prerender dead URLs.  
5. After deployment, re-submit `https://exquisitedentistryla.com/sitemap.xml` in Search Console. Watch the “Non-canonical URL” report to ensure Google ingests the updated entries.

## Suspense Fallback + Prefetch Rules

- Every lazy route must use `withRouteSkeleton` in `src/App.tsx`. When adding a route:
  - Import it with `React.lazy`.
  - Wrap it with `withRouteSkeleton(SomeRoute, { title, description, variant })` so the skeleton exposes meaningful headings while chunks load.
- Prefetch hot routes: add the lazy import callback to `criticalRoutes` or `fallbackRoutes` inside `src/hooks/use-route-prefetch.ts`. This keeps navigation snappy and reduces the time the skeleton is visible.
- If a new route should be prerendered, append its path to the `reactSnap.include` array in `package.json`.

## Verification Checklist (SEO-sensitive PRs)

- `npm run lint` – catches regressions in hooks/structured-data helpers.
- `npm run build` – generates the bundle, prerendered HTML, and sitemap.
- Inspect `dist/sitemap.xml` – verify canonical formatting and coverage.
- `npm run check:seo` – existing smoke test for canonical/OG tags inside the built HTML.
- Optional: `npm run preview` and navigate to new/changed routes to confirm skeletons and prerendered output look correct before merging.

Keep this document updated as the SEO stack evolves (e.g., if we migrate to full SSR or expand the sitemap generator). Consistency here saves hours of debugging “non-canonical” crawl issues later.
